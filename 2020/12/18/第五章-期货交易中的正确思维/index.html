<!DOCTYPE html>












  


<html class="theme-next pisces use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">




  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2">





















<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.0.1">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.0.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico?v=7.0.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.0.1">


  <link rel="mask-icon" href="/images/logo.svg?v=7.0.1" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '7.0.1',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="思考并回答以下问题：">
<meta name="keywords" content="期货多空逻辑">
<meta property="og:type" content="article">
<meta property="og:title" content="第五章 期货交易中的正确思维">
<meta property="og:url" content="http://yoursite.com/2020/12/18/第五章-期货交易中的正确思维/index.html">
<meta property="og:site_name" content="车斌的技术博客">
<meta property="og:description" content="思考并回答以下问题：">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2020-12-27T07:40:56.454Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="第五章 期货交易中的正确思维">
<meta name="twitter:description" content="思考并回答以下问题：">






  <link rel="canonical" href="http://yoursite.com/2020/12/18/第五章-期货交易中的正确思维/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>第五章 期货交易中的正确思维 | 车斌的技术博客</title><meta name="robots" content="noindex">
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">车斌的技术博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">专注</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
        </li>
      
    </ul>
  

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/12/18/第五章-期货交易中的正确思维/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="CheBin">
      <meta itemprop="description" content="放弃会成为一种习惯">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="车斌的技术博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">第五章 期货交易中的正确思维

              
            
          </h1>
        

        <div class="post-meta">

          

          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2020-12-18 11:07:18" itemprop="dateCreated datePublished" datetime="2020-12-18T11:07:18+08:00">2020-12-18</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2020-12-27 15:40:56" itemprop="dateModified" datetime="2020-12-27T15:40:56+08:00">2020-12-27</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/期货/" itemprop="url" rel="index"><span itemprop="name">期货</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">8.4k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">8 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>思考并回答以下问题：</p>
<a id="more"></a>
<h1 id="期货交易的核心是概率思维"><a href="#期货交易的核心是概率思维" class="headerlink" title="期货交易的核心是概率思维"></a><span style="color:#339AFF;">期货交易的核心是概率思维</span></h1><p>期货交易是一个需要不断学习和积累的过程，一个20年交易经历的期货老手和一个交易2个月交易经历的期货新手水平绝对是不一样的。然而，这并不要是说交易的经历越久，交易者的水平就越厉害。其根本原因在于，很多交易者以一种错误的思维方式在进行期货交易，即使他们有多年的交易经历，但也鲜有交易经验，他们不懂得观察、思考和总结，而只是凭感觉做出的交易决策，然而这并不是真正的期货投资，而是一种变相赌博！</p>
<p>期货交易的核心是概率思维，简单来说，就是在积极参与大概率事件的同时，努力防范小概率事件，如图5-1所示。任何交易者开仓的时候都认为自己的开仓方向将会是行情发展的大概率事件，缺乏概率思维的交易者有两个典型的表现：重仓和不止损，因为他们没有做到防范小概率事件。所以，一个交易者无论之前在期货市场中赚了多少钱，只要缺少这种概率思维，一次黑天鹅事件，期货市场就可以让他爆仓出局。</p>
<p>图5-1 参与大概率事件，同时防范小概率事件</p>
<p>既然我们知道了在交易中时刻保持概率思维，那么接下来的问题就是，我们如何去寻找大概率事件以及如何去防范小概率事件。在寻找大概率事件时，有的交易者采取了技术分析法，有的交易者采取了基本面分析法，也有的交易者利用基本面和技术面共振的方法。</p>
<p>长时间以来，基本面派和技术面派经常水火不容，互相攻击，其实任何方法并没有好坏之分，其判断结果都不是百分之百准确，而只是一种概率。在防范小概率事件时，大多数交易者的想法比较一致，那就是资金管理。然而，比资金管理更加重要的是自我管理，因为绝大多数主观交易者的一致性非常差。</p>
<p>参与大概率事件其实分为两个过程，首先我们需要发现什么是大概率事件，其次我们需要确定何时参与大概率事件。本质上前者考验的是交易者的商品选择能力，而后者考验的是交易者的择时能力。</p>
<p>众所周知，商品有同涨同跌的属性，既然如此，那为什么上涨的时候我们有时候选择做多铁矿石，而不去选择做多螺纹钢呢？这是因为，我们根据基本面分析认为铁矿石的上涨空间比螺纹钢的上涨空间更大一些。既然我们根据基本面分析判断商品后期会上涨，为什么我们不选择入场呢？这是因为，基本面分析的作用在于品种的选择，入场时机的选择需要技术面给出明显的进场信号。</p>
<p>很多交易者把基本面分析和技术分析的作用给混淆了，所以操作时比较混乱。其实，基本面的分析主要作用就是品种选择与方向判断，而技术分析的作用主要是进出场时机的选择。很多技术分析者不认可基本面分析者，他们有人认为基本面分析都是马后炮，也有人认为散户不可能了解基本面。</p>
<p>其实，基本面分析是通过演绎法的方式去判断市场走势，技术分析法是通过归纳法的方式去判断市场的走势，前者基于严格的逻辑推理，后者基于历史会重演等假设，但交易并非一门科学，所以基本面分析法并不总是有效，同时，历史并非会简单重演，所以技术分析法也并不总是有效，因此，两种分析方法的判断结果都只是一种概率，如图5-2所示。</p>
<p>图5-2 利用基本面分析和技术分析来提高主观胜率</p>
<p>精明的交易者时刻保持者概率思维，他们通过基本面分析法找到了大概率事件，利用技术分析给出的明显信号来参与大概率事件；与此同时，为了防范小概率事件，他们懂得做好资金管理。为了表示对于概率思维的尊重，当他们找到自认为的大概率事件时，并不是急于入场，而是耐心等待，等待着技术分析给出自己强烈的进场信号。</p>
<h1 id="让自己的交易处于平衡状态"><a href="#让自己的交易处于平衡状态" class="headerlink" title="让自己的交易处于平衡状态"></a><span style="color:#339AFF;">让自己的交易处于平衡状态</span></h1><p>期货交易中最重要的是什么？有人说是方法，有人说是技术，也有人说是心态，都各有道理。我个人认为，交易中最重要的是资金管理。无论是方法或者是技术，都只是帮助你提高交易胜率层面的优势，而无法帮助你提高赔率层面的优势。</p>
<p>相信很多交易者都听说过关于美国魔术师的故事，有一位美国魔术师放弃任何判断，采用看似荒唐的抛硬币的方法来决定交易的方向，硬币数字朝上时选择做多，硬币图案朝上时选择做空，结果一年下来这位神奇魔术师的交易结果令人震惊，收益实现了翻倍。如果说方法或技巧很重要，那么这位魔术师的案例则是一个很好的反例，因为他用了一种看似荒唐滑稽的抛硬币的方法就实现了非常好的盈利效果。</p>
<p>所以，交易中最重要的并不是什么方法或者技巧，然而大多数交易者认为存在所谓必胜甚至常胜的方法或者技巧，一直迷失在苦苦寻找交易圣杯的道路上。其实，交易中无非两个核心的因素，一个是胜率，一个是赔率，这位魔术师的方式显然是放弃了胜率，抛硬币猜多空的胜率理论上在50%，然而他最终可以实现收益翻倍，说明这位神奇的魔术师一定是一位资金管理大师，因为他的交易具有赔率优势。</p>
<p>我认为，交易者应该学习的是如何做好资金管理，然而，这恰恰是大多数散户交易者所忽略的地方。散户交易者的交易特点是赌，要么重仓押多，要么重仓押空，就像是无头苍蝇一样乱撞，而大资金的交易方法则截然相反，交易中基本上注重多空平衡。我们可以通过席位四象图这个工具来看一下盈利的大资金在长期交易中是如何保持平衡的。</p>
<p>如图5-3所示，这是奇货可查网站中的席位四象图，它由四个维度构成，横轴是多空维度，越靠右说明席位的持仓越偏多，越靠左说明席位的持仓越偏空；纵轴是盈亏维度，越往上说明席位赚钱越多，越往下说明席位亏钱越多；气泡大小是保证金维度，气泡越大说明席位占用的保证金越多，气泡越小说明席位占用的保证金越少；右边还有一列时间维度，我们可以选择任意一个时间，看一下各个席位多空配置的情况以及盈亏的情况。</p>
<p>图5-3 席位四象图</p>
<p>以最右列的时间轴为例，我们最开始点击上方的2019-06-17，然后找到这一列最下边的播放按钮，从而可以动态观察所有席位在这段时间之内的多空配置变化以及盈亏情况的变化，整个界面会出现一个动态的气泡到处移动的过程，如果你仔细观察的话，你会发现这里面存在一个交易的秘密，那就是平衡。</p>
<p>我们在图5-3中可以显而易见看到一个大而且高的气泡，你会发现那就是永安期货的席位，气泡大说明它所使用的保证金比较多，位置高说明它盈利比较多，但其实，它并不是一开始就盈利这么多，而是经过一段时间之后才爬到那么高的位置，在这段时间之内，你会发现永安期货的持仓和其他一些席位的持仓存在很大不同。</p>
<p>很多时候我们可能只关注它气泡大小和位置高低，却忽略了它的多空维度，在整个过程中，你会发现永安期货的多空持仓基本上是均衡的，一直在纵轴附近移动，不会大幅偏离纵轴，多头行情来的时候，它的多单盈利超过空单亏损，位置上移；空头行情来的时候，它的空单盈利超过多单亏损，位置还是上移。</p>
<p>不光是永安期货，一些盈利比较强的头部席位基本上也是如此，多空持仓基本均衡，一直不会大幅偏离纵轴；反之，一些盈利比较弱的尾部席位，它们的持仓十分极端，大幅偏离纵轴，一会儿最靠右，一会儿最靠左，随着时间的推移，位置越来越靠下。</p>
<p>其实，对于大多数散户来说，他们的交易方式是赌博，而对于大多数机构来说，他们的交易方式是构造平衡。对于散户来说，一会儿赌多，一会儿赌空，胆子大的不止损死扛，胆子小的频繁止损被割肉。对于机构来说，基本上不存在止损，而是通过构造平衡来对冲风险。</p>
<p>以永安期货为例，在聚酯产业链中，如图5-4所示。它持有大量PTA的多单，同时采取做空MEG来进行对冲；PTA和MEG都是聚酯产业链上游的原料，因此两个品种对应的下游需求是一致的，但是上游生产方式和生产工艺以及产业集中度不同，导致两个品种在供应端差异较大。因此，在对PTA和MEG进行对冲时，更多的是看两个品种的产能投放以及开工情况。</p>
<p>图5-4 聚酯产业链</p>
<p>类似的操作方式在永安这个席位的持仓多处可见，以MTO产业链为例，如图5-5所示，永安持有大量PP多单，同时做空MA进行对冲，也做空L进行对冲，尽管从聚酯产业链或者MTO装置原料和成品的对冲来看，似乎不是那么完全匹配，但是整体的能化板块上多空保证金基本上是配置较为均衡，在黑色系等其他版块也是如此，这样均衡的资金配置，无论行情是多头还是空头，抗风险能力都比较强，不像那些尾部席位，多空偏离巨大，抗风险能力较弱。</p>
<p>图5-5 MTO产业链</p>
<p>所以，对于交易者来说，要想成为期货市场上的寿星，你的持仓上要寻求平衡，多头头寸的货值要和空头头寸的货值近乎平衡，这是资金的平衡。还可以进一步细化到板块内部的平衡，能化板块的平衡、黑色板块的平衡、有色板块的平衡、农产品板块的平衡，甚至还可以继续细化到产业链内部的平衡。</p>
<p>靠赌确实能赚快钱，也能赚大钱，但是盈亏同源，也能亏快钱，亏大钱。平衡未必能赚块钱，但也能赚大钱。交易中快是风险，大并不是风险。大钱并不一定由快钱加周转率而来，快钱未必能够积累成大钱。大钱是目的，快钱只是一种手段，当这种手段无法达到你的目的时，可以换另一种手段，平衡其实更多的是一种慢钱到大钱的手段。</p>
<p>国外交易者经常说得一句话是：Trade to live，don’t live to trade！当你的持仓不平衡的时候，你的心也难以平静下来，做什么事情都容易受到自己持仓的影响，生怕一个意外事件给你的持仓带来巨大损失。</p>
<p>当你的持仓不平衡的时候，你的家庭生活可能也是不平衡的，在本来值得开心的时候，由于持仓不平衡带来的巨大亏损，作为交易者的你怎么能开心起来。这就会导致家庭生活中的情感不对称问题，当家人分享喜悦给你的时候，希望获得你的同理心和认可，而你由于持仓亏损巨大，没有表现出相同的喜悦，慢慢家庭关系以及家庭生活也会变得紧张和不平衡。</p>
<p>不仅如此，你做其他的事情也会因为持仓的不平衡而心不在焉，除了时刻盯在电脑屏幕或者手机屏幕之外，你找不到任何能够让放心的时候，那不是你在炒期货，而是期货在炒你，这样的交易是本末倒置的，交易的目的是为了更好的生活，而生活的目的不是为了交易！</p>
<p>因此，如图5-6所示，一个交易者想要做好交易，至少要做到三方面的平衡：资金多空持仓均衡、板块品种多空配置均衡、生活与交易均衡。</p>
<h1 id="事前风控的理念与操作方法"><a href="#事前风控的理念与操作方法" class="headerlink" title="事前风控的理念与操作方法"></a><span style="color:#339AFF;">事前风控的理念与操作方法</span></h1><p>凡事预则立，不预则废。期货交易也是如此。在开仓之前，我们需要做两手准备，如果我们判断正确了，该怎么办？如果我们判断错误了，又该怎么办？把两种情况都考虑清楚，然后制定合理的交易计划，交易中严格按照交易计划进行，这就是交易者常说的，计划你的交易，交易你的计划。</p>
<p>当然，这里不是详细介绍如何去制定一份交易计划，而是建议交易者要树立事前风控的交易理念，事前风控，事中执行，事后总结。我所接触的一些交易者，开仓之前并没有完全想清楚自己的止损区间或者止盈区间，目标并不明确。</p>
<p>这类交易者往往容易犯这样的错误：当持仓处于盈利状态时，由于缺乏盈利目标，不知道什么时候止盈，结果行情调整的时候，浮盈变成浮亏，又不懂得止损，结果行情越调越深，浮亏严重，最终自己因为承受能力不足而止损了。</p>
<p>如果按照这样的情况交易下去，那是永远也赚不到钱的，因为这从逻辑上就是一个死循环，如图5-7所示。盈利的时候，你永远不知道什么时候该止盈，行情不可能永远朝着一个方向发展，一旦行情掉头你就有可能亏损，然后你也没有明确的止损目标，结果浮亏越来越大，最终巨大的浮亏开始挑战你的心里承受能力，直到把你的心理防线给击垮，最终不得以而止损。所以这种没有目标和计划性的交易，最终结果必定是亏损离场。</p>
<p>图5-7 交易中的死循环</p>
<p>在交易之前，我们必须要有目标以及应对方式。如果你的判断正确，账户开始产生浮盈，最好采取移动止损的方式，不断上移止损线，这样即使最终触发止损了，离场的时候也能够确保不亏钱甚至盈利。盈利的时候，相对好处理一些，交易者的心态也比较放松一些。相反，当账户发生浮亏的时候，交易者心态上往往会面临较大的压力，所以必须提前想好应对措施。</p>
<p>如果是做带止损的交易的话，最好是根据入场位置以及最近的支撑位或阻力位设置止损位置，当价格突破支撑位或阻力位之后，就认为这笔交易失败了，以止损的方式退出交易。交易有容错率的，是允许失败的，不能为了避免失败而死扛。</p>
<p>如果是做不带止损的交易的话，最好提前想好是采取跨期对冲还是跨品种对冲的方式进行持仓，如果是跨期对冲的方式必须提前想好近远月多空的逻辑，不能够盲目地去进行跨期对冲，必须保证我们跨期对冲的两条交易是符合逻辑的；当然，我们也可以考虑选择跨品种对冲，跨品种对冲相对于跨期对冲来说一方面会占用更多的保证金，除非是标准化的套利组合，另一方面风险高于跨期对冲，但有时候预期收益也是高于跨期对冲的。</p>
<p>当市场再次朝着我们预期的方向发展时，我们可以把跨期对冲或者跨品种对冲的那一条交易平掉，从跨期或者跨品种对冲再次变为单边头寸，从而来缓解由于行情对我们不利，而导致账户资金大幅回撤的尴尬局面。总而言之，当账户浮亏到一定的阈值时，我们必须按照交易计划进行跨期或跨品种对冲，当行情再次对我们有利时，我们需要平掉对冲的品种。</p>
<h1 id="忠于客观，利用主观"><a href="#忠于客观，利用主观" class="headerlink" title="忠于客观，利用主观"></a><span style="color:#339AFF;">忠于客观，利用主观</span></h1><p>在这里，我们需要着重介绍三组核心的理念：主观与客观、赔率与胜率、现实与预期，如图5-8所示。这三组词很简单，所以往往被大家所忽视。但简单不等于容易，想做好以上这几点还是挺难的。</p>
<p>图5-8 需要注意的三组核心理念</p>
<p>01 主观与客观</p>
<p>首先，要分清楚交易中哪些是主观的，哪些是客观的。我们的基本面分析和技术分析都是主观的，主观的判断未来行情发展的方向，只不过主观判断的方法或者手段不同而已。</p>
<p>既然是主观的东西，那就存在争议，因为见仁见智。所以基本面分析者之间存在争议，基本面分析者和技术分析者之间存在争议，技术分析者之间也可能存在争议。其实，争来争去，没有任何意义，不过是概率而已。</p>
<p>其次，如果你的交易中没有发现客观的理由并坚持客观的理由，交易大概率会是亏钱的。</p>
<p>根据我的观察，很多交易者往往过分重视自己主观判断的概率，而忽视一些客观的因素。但他们却不知道自己的判断是存在较大主观的，我也很主观，但是我在主观的同时，会注重客观并坚持客观优势。</p>
<p>那我们来思考一下，交易中什么是客观的，什么是主观的？</p>
<p>02 赔率与胜率</p>
<p>赔率是客观的，或者说盈亏比是客观的。所以，我一直建议大家顺基差交易，顺期限结构交易，就是为了让大家占据客观优势。</p>
<p>顺基差交易：深贴水做多，高升水做空。</p>
<p>顺期限结构交易：back结构做多，contango结构做空。</p>
<p>我举一个简单的例子，如图5-9所示。某个品种现货4000元/吨，期货3700元/吨，现在期货贴水，最终期现要修复，但问题是修复方式有两种，一种是期货上涨修复基差，另一种是现货下跌修复基差。</p>
<p>图5-9 顺基差交易所带来的客观赔率优势</p>
<p>其实，我们无论是利用基本面分析还是利用技术分析，都是为了判断基差修复的方向，都是主观判断。现在，我们不去判断修复方向，我们假设期货上涨修复和现货下跌修复的概率是一样的，都是50%。</p>
<p>顺基差交易，在深贴水的情况下，我们应该做多期货，如果做对了，最终期货上涨来修复，假设最终收在了4100元/吨，我们赚400元/吨；如果做错了，最终现货下跌来修复，假设收在了3600元/吨，我们亏了100元/吨。你会发现，顺基差交易的赔率是4:1，但如果你逆基差交易去做的话，赔率是1:4。</p>
<p>赔率4:1，胜率50%，长此以往交易下来，你会赚很多钱。事实上，我总结过自己的交易，发现37%的胜率，3:1以上的赔率，盈利非常不错的。但是大多数人都忽视客观的赔率，执念主观的胜率。</p>
<p>很多人往往忽视基差或者期限结构给我们提供的客观赔率，而是发挥自己的聪明才智，通过基本面分析也好，技术分析也好，去证明自己比别人聪明，判断未来的方向，就是为了提高胜率。</p>
<p>当然，我自己也这样做过，当我通过顺基差交易找到了客观上的赔率优势之后，我继续思考，如何再能提高主观上的胜率优势。所以才有了库存和利润两个判断胜率的指标。</p>
<p>期货贴水，从赔率上讲适合做多，如果从胜率上讲，它确实应该做多就更好了。所以除了基差之外，我想找指标来帮助我提高胜率。如果想要期货上涨来修复基差，那么现货至少要坚挺，现货想要坚挺，那么现货市场上供求关系要偏紧，供求偏紧的结果就是库存偏紧，所以低库存的情况下，我主观判断期货上涨修复基差的概率较大，这是主观胜率。</p>
<p>因此，这才有了最初的基差+库存的交易逻辑：</p>
<p>深贴水（高赔率）+低库存（高胜率）—&gt;做多</p>
<p>高升水（高赔率）+高库存（高胜率）—&gt;做空</p>
<p>永远需要记住的一点就是，赔率是客观的，胜率是我们主观判断的，无论你用什么方法，在我看来，胜率都是主观的，所谓的合理的逻辑推演也是主观的。主观的东西，都是概率，既然是概率，就存在尾部风险。</p>
<p>表面上看，基于库存+基差的逻辑去交易已经非常好了，高赔率+高胜率，但实际上在交易过程中，我发现我认为的高胜率，有时候并不高，后来我发现，关于胜率的判断，用库存一个指标是不够的，后来又加入了利润这个指标。</p>
<p>当库存和利润两个指标共振的时候，我们去做单边；当库存和利润矛盾的时候，我们去做对冲，如图5-10所示。</p>
<p>深贴水（高赔率）+低库存+低利润（高胜率）—&gt;做多</p>
<p>高升水（高赔率）+高库存+高利润（高胜率）—&gt;做空</p>
<p>图5-10 库存+基差+利润的交易策略</p>
<p>所以，你会发现，交易的核心都是围绕着赔率和胜率展开的，寻找相关的指标，同时区分哪些是主观的，哪些是客观的，坚持客观的东西，然后再去看主观的东西。</p>
<p>其实，我经常提到的两个交易思路都是遵循客观为主、主观为辅的思想：</p>
<p>1）库存+基差+利润</p>
<p>2）期限结构+库存/仓单验证</p>
<p>在我看来，当下现实是客观的，未来预期是主观的。客观的东西永远比主观的东西可靠。所以，我一直认为，追求主观胜率的交易者不如追求客观赔率的交易者，当然炒单和高频交易者可能并不同意我的观点；做主观预期的交易者不如做客观现实的交易者。</p>
<p>我关注永安这个席位很久了，我发现它的交易模式是：第一，顺基差交易或者顺期限结构交易；第二，注重当下客观；第三，注重持仓平衡。</p>
<p>Back结构下的品种，常规思路是做多具有赔率优势，但是很多人放弃赔率优势，选择去做空，因为按照他们的逻辑推演，未来价格是要下跌的。但问题是你这个主观判断的胜率长期均值是多少呢？假设你判断胜率是80%，按照上面的例子，逆基差交易，给你1:4的赔率，我可以肯定的告诉你，按这个赔率和盈亏比，你照样会亏钱。</p>
<p>为什么会这样？因为期限结构近月的一端反映的是现实，远月的一端反映的是预期。客观的期限结构和基差给了你实实在在的赔率优势，你放弃了，你选择相信自己的判断，逆期限结构和基差去做预期，做你主观的判断。</p>
<p>但问题是，期货贴水的幅度是否已经把你的主观预期price in了？或者price in多少？我相信很多人难以去量化出来。或许你的主观判断没错，但问题是，盘面的贴水已经把你的逻辑price in了，而你却不知道。</p>
<p>所以，我的建议是，你可以有主观预期，无论是需求端悲观的预期，还是供应端产能投放的预期，在back结构下如果你要做空，需要注意两点：</p>
<p>第一，基差修复或者back结构走平，这个时候你做空的赔率在上升，做多的赔率在下降，如果你主观上认为自己判断的胜率较高，你可以去做空。也就是我常说的，黑色系价格高位，期现接近平水，大胆做空。</p>
<p>第二，你预期未来会下跌，但有句话说，不见兔子不撒鹰，在back结构下，你只有实实在在看到现货崩盘了，你再去空。而不是主观判断未来要跌，期货贴水很大，现货没动，你就杀进去了。</p>
<p>此外，如果你自认为判断胜率非常高，达到了95%甚至99%，在期货深贴水的情况下，你可以去做空。但是用塔勒布的观点来看，做胜率的交易具有脆弱性，做赔率的交易具有反脆弱性。</p>
<p>另外，如果说永安席位背后代表的是smart money，你会发现，他们的交易是多么务实，多么注重当下或者说眼前的供需平衡表，未来的预期过于主观，谁能说得准呢，这里面存在太多的变数。</p>
<p>对于smart money来说，做得就是当下的供需平衡表，至于基于预期推理出来的未来供需平衡表，傻瓜才去做呢，因为在未来预期被逐步验证的过程中，smart money有足够的时间去调整头寸，再次变为依据当下客观的现实去配置头寸。</p>
<p>大多数散户交易者，分不清楚期货市场中哪些消息是真实的，哪些消息是假的。容易被各种所谓的预期给忽悠，务实一些，关注当下，把握你能把握住的东西，然后利用你无法把握或者主观的东西。</p>
<p>最后，再次强调一下客观和主观的区分：</p>
<p>l 赔率（客观）vs 胜率（主观）</p>
<p>l 现实（客观）vs 预期（主观）</p>
<p>l 顺基差（客观）vs 逆基差（主观）</p>
<p>l 顺期限结构（客观）vs 逆期限结构（主观）</p>
<p>另外，我并不是说总是按照客观来做，不去做主观，因为主观的东西随着时间有可能变成客观，但是做主观的时候要不见兔子不撒鹰，逆基差交易时，你要看到现货崩盘才去做；逆期限结构交易时，你要看到期限结构斜率发生变化时才去做；在做主观交易时，尽量在赔率上升的时候做，不要在赔率太低的时候做。</p>
<!-- flag of hidden posts -->
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/期货多空逻辑/" rel="tag"># 期货多空逻辑</a>
          
        </div>
      

      
      
      

      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.jpg" alt="CheBin">
            
              <p class="site-author-name" itemprop="name">CheBin</p>
              <div class="site-description motion-element" itemprop="description">放弃会成为一种习惯</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">181</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">11</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">22</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          

          

          
          


          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <!-- modify icon to fire by szw -->
                <i class="fa fa-history fa-" aria-hidden="true"></i>
                近期文章
              </div>
              <ul class="links-of-blogroll-list">
                
                
                  <li>
                    <a href="/2021/01/07/markdown1/" title="markdown1" target="_blank">markdown1</a>
                  </li>
                
                  <li>
                    <a href="/2021/01/03/2-我对金融市场运行规律的认识/" title="2-我对金融市场运行规律的认识" target="_blank">2-我对金融市场运行规律的认识</a>
                  </li>
                
                  <li>
                    <a href="/2020/12/08/既然有HTTP请求，为什么还要用RPC调用？/第3章 Python的图表绘制 _ 车斌的技术博客_files/next-boot/" title target="_blank"></a>
                  </li>
                
                  <li>
                    <a href="/2020/12/08/既然有HTTP请求，为什么还要用RPC调用？/第3章 Python的图表绘制 _ 车斌的技术博客_files/post-details/" title target="_blank"></a>
                  </li>
                
                  <li>
                    <a href="/2020/12/08/既然有HTTP请求，为什么还要用RPC调用？/第3章 Python的图表绘制 _ 车斌的技术博客_files/scrollspy/" title target="_blank"></a>
                  </li>
                
              </ul>
            </div>
        

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#期货交易的核心是概率思维"><span class="nav-number">1.</span> <span class="nav-text">期货交易的核心是概率思维</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#让自己的交易处于平衡状态"><span class="nav-number">2.</span> <span class="nav-text">让自己的交易处于平衡状态</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#事前风控的理念与操作方法"><span class="nav-number">3.</span> <span class="nav-text">事前风控的理念与操作方法</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#忠于客观，利用主观"><span class="nav-number">4.</span> <span class="nav-text">忠于客观，利用主观</span></a></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2018 – <span itemprop="copyrightYear">2021</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">CheBin</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">站点总字数：</span>
    
    <span title="站点总字数">2m</span>
  

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    
      <span class="post-meta-item-text">站点阅读时长 &asymp;</span>
    
    <span title="站点阅读时长">30:24</span>
  
</div>


  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a></div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/src/utils.js?v=7.0.1"></script>

  <script src="/js/src/motion.js?v=7.0.1"></script>



  
  


  <script src="/js/src/affix.js?v=7.0.1"></script>

  <script src="/js/src/schemes/pisces.js?v=7.0.1"></script>



  
  <script src="/js/src/scrollspy.js?v=7.0.1"></script>
<script src="/js/src/post-details.js?v=7.0.1"></script>



  


  <script src="/js/src/next-boot.js?v=7.0.1"></script>


  

  

  

  


  


  
  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url).replace(/\/{2,}/g, '/');
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x"></i></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  
  

  
  

  


  

  

  

  

  

  

  

  

  
<script>
  $('.highlight').each(function(i, e) {
    var $wrap = $('<div>').addClass('highlight-wrap');
    $(e).after($wrap);
    $wrap.append($('<button>').addClass('copy-btn').append('复制').on('click', function(e) {
      var code = $(this).parent().find('.code').find('.line').map(function(i, e) {
        return $(e).text();
      }).toArray().join('\n');
      var ta = document.createElement('textarea');
      var yPosition = window.pageYOffset || document.documentElement.scrollTop;
      ta.style.top = yPosition + 'px'; // Prevent page scroll
      ta.style.position = 'absolute';
      ta.style.opacity = '0';
      ta.readOnly = true;
      ta.value = code;
      document.body.appendChild(ta);
      ta.select();
      ta.setSelectionRange(0, code.length);
      ta.readOnly = false;
      var result = document.execCommand('copy');
      
        if (result) $(this).text('复制成功');
        else $(this).text('复制失败');
      
      ta.blur(); // For iOS
      $(this).blur();
    })).on('mouseleave', function(e) {
      var $b = $(this).find('.copy-btn');
      setTimeout(function() {
        $b.text('复制');
      }, 300);
    }).append(e);
  })
</script>


  

  

</body>
</html>
